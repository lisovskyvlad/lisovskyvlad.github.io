---
layout: post
title: Установка Windows в Virtual Box
date: 2014-02-05 01:20:00 +0400
comments: true
categories:
- windows
- microsoft
- virtualbox
---

Этот пост в большей степени может пригодиться тем, кто в своей повседневной работе используют *nix операционные системы.
Бывает ли у вас так, что нужна какая-либо версия операционной системы Windows? Например, для запуска
Windows-only софта или тестирования вашего веб-приложения в IE?

В этой заметку я опишу простое и дешевое решение этой задачи.

<!-- more -->

Не знаю как у вас, а у меня в институте лабораторные работы по некоторых предметов можно
выполнить используя ПО, которое работает только под Windows, как пример AllFusion ERwin,
Sony Vegas, 3ds MAX и тому подобные.

Кроме макбука, у меня есть ещё старый PC ноутбук, купленный на 1-м курсе, на котором есть винда и убунта,
но он тяжелый и не удобно его брать с собой, если я еду сдавать что-либо.
Мне надоела такая ситуация и я решил найти решение чтобы заиметь Windows у себя на макбучке.

Решений два:

- Виртуализация
- Поставить Windows как вторую систему:
  - в случае мака используют [Boot_Camp](https://ru.wikipedia.org/wiki/Boot_Camp),
  - в случае PC, можно просто поставить Windows как вторую и использовать GRUB.

Так как винда мне нужна не так часто, чтобы засорять ей макбук и он у меня вполне мощный,
чтобы держать несколько ос одновременно, я выбрал виртуализацию.

И начал я искать где взять готовый образ какой-либо версии Windows для VirtualBox.
Нашел http://rutracker.org/forum/viewtopic.php?t=4485398, начал разбираться,
но что-то не задалось, да и каким-то непростым оказался это способ, с образами жестких дисков, точно не быстрым.

Решение нашлось неожиданно. На веб-сайте [modern.ie](http://modern.ie) Microsoft раздаёт Windows с разными IE,
чтобы вы могли проверять свои сайте в этом браузере. Что меня очень порадовало, так это то, что есть сборки
под любую операционную систему (Windows, Linux, Mac OS) и под все основные
виртуализации (VMWare, Hyper-V, VirtualBox, Parallels).

Мне лучше всего подошла связка Mac OS + VirtualBox.
VirtualBox потому что я давно его использую через Vagrant и потому что он бесплатный.

### Инструкция, как легко заполучить Windows в виртуальной машине VirtualBox:

- Вводим в адресной строке http://loc.modern.ie/ru/virtualization-tools#downloads
- Выбираем VirtualBox (или любую другую виртуализацию)
- Появляется табличка, где можно найти подходящую для задачи пару Windows version + IE version, есть даже Windows XP + IE6 для тех, кто хочет поностальгировать
{% img http://s25.postimg.org/wec60dhin/table_windows_ies.png %}
- Жмём на "Grab them all with cURL", появится окошко, где будет указана команда curl для скачивания необходимых файлов.
Вот тут ребятам из Редмонда большое спасибо за такую фичу! Впрочем, она присутствует только для Mac OS,
для Linux такое подсказки нет почему-то. Для примера приведу команду для скачивания Windows 7 + IE 11:
```
curl -O -L "http://www.modern.ie/vmdownload?platform=mac&virtPlatform=virtualbox&browserOS=IE11-Win7&filename=VirtualBox/IE11_Win7/Mac/IE11.Win7.For.MacVirtualBox.part{1.sfx,2.rar,3.rar,4.rar}"
```
- Общий размер скачиваемых файлов для 7-й и 8-й винды больше 3 GB, так что придется подождать.
-  Как только всё загрузилось, нужно сделать файл part1.sfx исполняемым и запустить его.
```
chmod +x ./part1.sfx && ./part1.sfx
```
- Через пару минит вы получите готовый образ в формате ova
- Запускаем VirtualBox
- Нажимаем в верхнем меню Файл -> Импорт конфигураций, либо просто Command + I.
{% img http://s25.postimg.org/ovt0rqq5r/vb_import_configuration.png %}
- Выбираем получившийся файл *.ova
- Жмём "Далее" несколько раз
- Готово! Можно запускать виртуальную машину!

Чтобы передавать файлы на между хостовой ос и гостевой надо настроить "Гостевые папки":
- В списке виртуальных машин VirtualBox нажимаем правой кнопкой на машину
- В выпавшем списке жмём на 1-й пункт "Настроить"
- Выбираем меню "Общие папки"
- Выбираем папку
- Обязательно нажать на OK ( у меня появляется странное белое окно)
- Перезапускаем машину, эта папка должна быть видна как сетевая
- Если машина уже запущена, то нужно выполнить команду:
```
net use x: \\vboxsvr\sharename
```
К сожалению, мне не удалось заставить подключить сетевую папку таким способом, но в [документации](https://www.virtualbox.org/manual/ch04.html#sharedfolders) этот процесс описан подробно.

Буду рад комментариям и если моё решение пригодится вам!
